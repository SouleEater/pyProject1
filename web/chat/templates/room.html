<!-- chat/templates/room.html -->

<!DOCTYPE html>
<html>
<head>
    <title>Чат в комнате {{ room_name }}</title>
</head>
<body>
    <h1>Чат в комнате {{ room_name }}</h1>
    <div id="chat-messages"></div>
    <textarea id="chat-input" placeholder="Введите ваше сообщение..."></textarea>
    <button id="send-button">Отправить</button>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script>
        var roomName = '{{ room_name }}';
        var chatSocket = new WebSocket('ws://' + window.location.host + '/ws/chat/' + roomName + '/');

        chatSocket.onmessage = function (e) {
            var data = JSON.parse(e.data);
            var message = data.message;
            $('#chat-messages').append('<p>' + message + '</p>');
        };

        $('#send-button').click(function () {
            var message = $('#chat-input').val();
            chatSocket.send(JSON.stringify({
                'message': message
            }));
            $('#chat-input').val('');
        });
    </script>
</body>
</html>
